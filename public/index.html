<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <title>Outils Sparnatural</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 2em;
        background: #f5f5f5;
      }
      h1 {
        color: #333;
      }
      textarea,
      input,
      button {
        font-size: 1em;
        width: 100%;
        margin-bottom: 1em;
        padding: 0.5em;
      }
      .result {
        background: #fff;
        padding: 1em;
        border: 1px solid #ccc;
        white-space: pre-wrap;
      }
      section {
        background: #fff;
        padding: 1.5em;
        margin-bottom: 2em;
        border-radius: 8px;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
      }
    </style>
  </head>
  <body>
    <section>
      <h1>1. Tester un résumé de requête JSON</h1>
      <label for="jsonQuery">Requête JSON :</label>
      <textarea
        id="jsonQuery"
        rows="10"
        placeholder="Collez ici votre requête JSON ..."
      ></textarea>

      <label for="lang1">Langue :</label>
      <input type="text" id="lang1" value="en" />

      <button onclick="sendJsonQuery()">Envoyer</button>

      <h2>Résumé :</h2>
      <div id="jsonResult" class="result"></div>
    </section>

    <section>
      <h1>2. Générer une requête JSON depuis une demande en langage naturel</h1>
      <label for="naturalRequest">Demande en langage naturel :</label>
      <textarea
        id="naturalRequest"
        rows="5"
        placeholder="Ex : Donne-moi toutes les œuvres exposées en France"
      ></textarea>

      <label for="lang2">Langue :</label>
      <input type="text" id="lang2" value="fr" />

      <button onclick="sendNaturalRequest()">Envoyer</button>

      <h2>Requête JSON générée :</h2>
      <div id="naturalResult" class="result"></div>
    </section>

    <section>
      <h1>3. Resolver un URI desde un label</h1>
      <label for="label">Label:</label>
      <input type="text" id="label" placeholder="Ej: Francia" />

      <label for="type">Tipo:</label>
      <input type="text" id="type" placeholder="Ej: País" />

      <button onclick="resolveUri()">Resolver URI</button>

      <h2>URI:</h2>
      <div id="uriResult" class="result"></div>
    </section>

    <script>
      async function resolveUri() {
        const label = encodeURIComponent(
          document.getElementById("label").value
        );
        const type = encodeURIComponent(document.getElementById("type").value);
        const url = `/dbpedia-en/api/v1/uriLookup?label=${label}&type=${type}`;
        const res = await fetch(url);
        const json = await res.json();
        document.getElementById("uriResult").textContent = json.uris.join(", ");
      }
    </script>

    <script>
      async function sendJsonQuery() {
        const query = encodeURIComponent(
          document.getElementById("jsonQuery").value
        );
        const lang = document.getElementById("lang1").value;
        const url = `/dbpedia-en/api/v1/query2text?query=${query}&lang=${lang}`;
        const res = await fetch(url);
        const json = await res.json();
        document.getElementById("jsonResult").textContent = json.text;
      }

      async function sendNaturalRequest() {
        const prompt = encodeURIComponent(
          document.getElementById("naturalRequest").value
        );
        const lang = document.getElementById("lang2").value;
        const url = `/dbpedia-en/api/v1/text2query?prompt=${prompt}&lang=${lang}`;
        const res = await fetch(url);
        const json = await res.json();
        document.getElementById("naturalResult").textContent = JSON.stringify(
          json,
          null,
          2
        );
      }
    </script>
  </body>
</html>
