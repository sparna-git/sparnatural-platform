@prefix core: <http://data.sparna.fr/ontologies/sparnatural-config-core#> .
@prefix dash: <http://datashapes.org/dash#> .
@prefix datasources: <http://data.sparna.fr/ontologies/sparnatural-config-datasources#> .
@prefix dbpedia: <http://dbpedia.org/ontology/> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix sparql: <http://www.w3.org/ns/sparql-service-description#> .
@prefix this: <https://data.mydomain.com/ontologies/sparnatural-config/> .
@prefix volipi: <http://data.sparna.fr/ontologies/volipi#> .
@prefix wdt: <http://www.wikidata.org/prop/direct/> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

<https://data.mydomain.com/ontologies/sparnatural-config> a owl:Ontology ;
    dcterms:format <https://xls2rdf.sparna.fr/rest/convert?url=https%3A%2F%2Fdocs.google.com%2Fspreadsheets%2Fd%2F1raPi-qimg5gdD_3jWdBVlQqwbmKGIlVf%2Fexport%3Fformat%3Dxlsx&noPostProcessings=true> ;
    dcterms:source <https://docs.google.com/spreadsheets/d/1raPi-qimg5gdD_3jWdBVlQqwbmKGIlVf> .

this:Artwork a sh:NodeShape ;
    rdfs:label "Artwork"@en,
        "Oeuvre"@fr ;
    volipi:iconName "fa-solid fa-paint-brush" ;
    sh:description "A piece of art that can be displayed in a museum"@en,
        "Une Œuvre qui peut être exposée dans un musée"@fr ;
    sh:nodeKind sh:IRI ;
    sh:order 1 ;
    sh:property [ core:enableNegation true ;
            core:enableOptional true ;
            datasources:datasource datasources:search_rdfslabel_bifcontains ;
            dash:searchWidget core:AutocompleteProperty ;
            sh:class dbpedia:Museum ;
            sh:name "displayed at"@en,
                "exposée à"@fr ;
            sh:nodeKind sh:IRI ;
            sh:path [ sh:alternativePath ( dbpedia:museum [ sh:inversePath dbpedia:displays ] ) ] ],
        [ core:enableNegation true ;
            core:enableOptional true ;
            dash:searchWidget core:NonSelectableProperty ;
            sh:name "thumbnail"@en,
                "vignette"@fr ;
            sh:node this:Image ;
            sh:nodeKind sh:IRI ;
            sh:path dbpedia:thumbnail ],
        [ core:enableNegation true ;
            core:enableOptional true ;
            dash:searchWidget core:SearchProperty ;
            sh:datatype rdf:langString ;
            sh:minCount 1 ;
            sh:name "description"@en,
                "description"@fr ;
            sh:node this:Text ;
            sh:nodeKind sh:Literal ;
            sh:path rdfs:comment ],
        [ core:enableNegation true ;
            core:enableOptional true ;
            datasources:datasource datasources:search_rdfslabel_bifcontains ;
            dash:searchWidget core:AutocompleteProperty ;
            sh:class dbpedia:Person ;
            sh:description "the artist, painter or sculptor who created the artwork"@en,
                "l'artiste, le peintre ou le sculpteur qui a créé l'œuvre"@fr ;
            sh:name "author"@en,
                "auteur"@fr ;
            sh:nodeKind sh:IRI ;
            sh:path dbpedia:author ],
        [ core:enableNegation true ;
            core:enableOptional true ;
            dash:searchWidget core:TimeProperty-Year ;
            sh:datatype xsd:gYear ;
            sh:name "creationYear"@en,
                "année de création"@fr ;
            sh:node this:Date ;
            sh:nodeKind sh:Literal ;
            sh:path dbpedia:creationYear ],
        [ core:enableNegation false ;
            core:enableOptional false ;
            dash:propertyRole dash:LabelRole ;
            dash:searchWidget core:SearchProperty ;
            sh:datatype rdf:langString ;
            sh:minCount 1 ;
            sh:name "label"@en,
                "libellé"@fr ;
            sh:node this:Text ;
            sh:nodeKind sh:Literal ;
            sh:path rdfs:label ] ;
    sh:targetClass dbpedia:Artwork .

this:Country a sh:NodeShape ;
    rdfs:label "Country"@en,
        "Pays"@fr ;
    volipi:iconName "fa-solid fa-globe-africa" ;
    sh:description "A DBPedia Country"@en,
        "Un Pays DBPedia"@fr ;
    sh:nodeKind sh:IRI ;
    sh:order 3 ;
    sh:property [ core:enableNegation true ;
            core:enableOptional true ;
            datasources:datasource datasources:search_rdfslabel_bifcontains ;
            dash:searchWidget core:AutocompleteProperty ;
            sh:class dbpedia:Museum ;
            sh:description "Specifies the museums located in this country."@en,
                "Spécifie les musées situés dans ce pays."@fr ;
            sh:minCount 1 ;
            sh:name "country of"@en,
                "pays de"@fr ;
            sh:nodeKind sh:IRI ;
            sh:path [ sh:inversePath dbpedia:country ] ],
        [ core:enableNegation true ;
            core:enableOptional true ;
            datasources:datasource datasources:search_rdfslabel_bifcontains ;
            dash:searchWidget core:AutocompleteProperty ;
            sh:class dbpedia:Person ;
            sh:description "Persons who were born in this country.<br/><br/><em>Note : in DBPedia, persons are linked to the city in which they were born, and the city is linked to the country.</em>"@en,
                "Les personnes nées dans ce pays.<br/><br/><em>A noter : dans DBPedia, les personnes sont liées à leur ville de naissance, et la ville est reliée au pays.</em>"@fr ;
            sh:name "birth place of"@en,
                "lieu de naissance de"@fr ;
            sh:nodeKind sh:IRI ;
            sh:order "1" ;
            sh:path [ sh:inversePath dbpedia:birthPlace ] ],
        [ core:enableNegation true ;
            core:enableOptional true ;
            datasources:datasource datasources:search_rdfslabel_bifcontains ;
            dash:searchWidget core:AutocompleteProperty ;
            sh:class dbpedia:Person ;
            sh:description "Persons who died in this country.<br/><br/><em>Note : in DBPedia, persons are linked to the city where they died, and the city is linked to the country.</em>"@en,
                "Les personnes décédées dans ce pays.<br/><br/><em>A noter : dans DBPedia, les personnes sont liées à leur ville de décès, et la ville est reliée au pays.</em>"@fr ;
            sh:name "death place of"@en,
                "lieu de décès de"@fr ;
            sh:nodeKind sh:IRI ;
            sh:order "2" ;
            sh:path [ sh:inversePath dbpedia:deathPlace ] ],
        [ core:enableNegation false ;
            core:enableOptional false ;
            dash:propertyRole dash:LabelRole ;
            dash:searchWidget core:AutocompleteProperty ;
            sh:datatype rdf:langString ;
            sh:minCount 1 ;
            sh:name "label"@en,
                "libellé"@fr ;
            sh:node this:Text ;
            sh:nodeKind sh:Literal ;
            sh:path rdfs:label ] ;
    sh:targetClass dbpedia:Country .

this:Museum a sh:NodeShape ;
    rdfs:label "Museum"@en,
        "Musée"@fr ;
    volipi:iconName "fa-solid fa-university" ;
    sh:description "A DBPedia Museum"@en,
        "Un Musée DBPedia"@fr ;
    sh:nodeKind sh:IRI ;
    sh:order 2 ;
    sh:property [ core:enableNegation true ;
            core:enableOptional true ;
            dash:searchWidget core:NonSelectableProperty ;
            sh:name "thumbnail"@en,
                "vignette"@fr ;
            sh:node this:Image ;
            sh:nodeKind sh:IRI ;
            sh:path dbpedia:thumbnail ],
        [ core:enableNegation false ;
            core:enableOptional false ;
            dash:propertyRole dash:LabelRole ;
            dash:searchWidget core:SearchProperty ;
            sh:datatype rdf:langString ;
            sh:minCount 1 ;
            sh:name "label"@en,
                "libellé"@fr ;
            sh:node this:Text ;
            sh:nodeKind sh:Literal ;
            sh:path rdfs:label ],
        [ core:enableNegation true ;
            core:enableOptional true ;
            datasources:datasource datasources:list_rdfslabel_count ;
            dash:searchWidget core:ListProperty ;
            sh:class dbpedia:Country ;
            sh:description "Specifies the country where the museum is located."@en,
                "Spécifie le pays où se trouve le musée."@fr ;
            sh:name "country"@en,
                "pays"@fr ;
            sh:nodeKind sh:IRI ;
            sh:path dbpedia:country ],
        [ core:enableNegation true ;
            core:enableOptional true ;
            dash:searchWidget core:NumberProperty ;
            sh:name "number of visitors"@en,
                "nombre de visiteurs"@fr ;
            sh:node this:Number ;
            sh:nodeKind sh:Literal ;
            sh:path dbpedia:numberOfVisitors ],
        [ core:enableNegation true ;
            core:enableOptional true ;
            dash:searchWidget core:NonSelectableProperty ;
            sh:class dbpedia:Artwork ;
            sh:name "displays"@en,
                "expose"@fr ;
            sh:nodeKind sh:IRI ;
            sh:path [ sh:alternativePath ( dbpedia:displays [ sh:inversePath dbpedia:museum ] ) ] ],
        [ core:enableNegation true ;
            core:enableOptional true ;
            dash:searchWidget core:SearchProperty ;
            sh:datatype rdf:langString ;
            sh:minCount 1 ;
            sh:name "description"@en,
                "description"@fr ;
            sh:node this:Text ;
            sh:nodeKind sh:Literal ;
            sh:path rdfs:comment ],
        [ core:enableNegation true ;
            core:enableOptional true ;
            dash:searchWidget core:NonSelectableProperty ;
            sh:name "has other record"@en,
                "autre fiche"@fr ;
            sh:node this:MuseumWikidata ;
            sh:nodeKind sh:IRI ;
            sh:path owl:sameAs ] ;
    sh:targetClass dbpedia:Museum .

this:Person a sh:NodeShape ;
    rdfs:label "Person"@en,
        "Personne"@fr ;
    volipi:iconName "fa-solid fa-male" ;
    sh:description "A person, here usually a painter or sculptor"@en,
        "Une personne, ici souvent un peintre ou un scupteur"@fr ;
    sh:nodeKind sh:IRI ;
    sh:order 4 ;
    sh:property [ core:enableNegation true ;
            core:enableOptional true ;
            dash:searchWidget core:NonSelectableProperty ;
            sh:name "thumbnail"@en,
                "vignette"@fr ;
            sh:node this:Image ;
            sh:nodeKind sh:IRI ;
            sh:path dbpedia:thumbnail ],
        [ core:enableNegation true ;
            core:enableOptional true ;
            datasources:datasource datasources:list_rdfslabel_count ;
            dash:searchWidget core:ListProperty ;
            sh:name "movement"@en,
                "mouvement"@fr ;
            sh:node this:Movement ;
            sh:nodeKind sh:IRI ;
            sh:path dbpedia:movement ],
        [ core:enableNegation true ;
            core:enableOptional true ;
            dash:searchWidget core:SearchProperty ;
            sh:datatype rdf:langString ;
            sh:minCount 1 ;
            sh:name "description"@en,
                "description"@fr ;
            sh:node this:Text ;
            sh:nodeKind sh:Literal ;
            sh:path rdfs:comment ],
        [ core:enableNegation false ;
            core:enableOptional false ;
            dash:propertyRole dash:LabelRole ;
            dash:searchWidget core:SearchProperty ;
            sh:datatype rdf:langString ;
            sh:minCount 1 ;
            sh:name "label"@en,
                "libellé"@fr ;
            sh:node this:Text ;
            sh:nodeKind sh:Literal ;
            sh:path rdfs:label ],
        [ core:enableNegation true ;
            core:enableOptional true ;
            dash:searchWidget core:TimeProperty-Date ;
            sh:name "birth date"@en,
                "date de naissance"@fr ;
            sh:node this:Date ;
            sh:nodeKind sh:Literal ;
            sh:order "1" ;
            sh:path dbpedia:birthDate ],
        [ core:enableNegation true ;
            core:enableOptional true ;
            datasources:datasource datasources:search_rdfslabel_bifcontains ;
            dash:searchWidget core:AutocompleteProperty ;
            sh:class dbpedia:Artwork ;
            sh:name "created"@en,
                "a créé"@fr ;
            sh:nodeKind sh:IRI ;
            sh:path [ sh:inversePath dbpedia:author ] ],
        [ core:enableNegation true ;
            core:enableOptional true ;
            datasources:datasource datasources:list_rdfslabel_alpha_with_count ;
            dash:searchWidget core:AutocompleteProperty ;
            sh:class dbpedia:Country ;
            sh:description "The country where the person died.<br/><br/><em>Note : in DBPedia, persons are linked to the city where they died, and the city is linked to the country.</em>"@en,
                "Le pays où la personne est décédée.<br/><br/><em>A noter : dans DBPedia, les personnes sont liées à leur ville de décès, et la ville est reliée au pays.</em>"@fr ;
            sh:maxCount 1 ;
            sh:name "died in"@en,
                "mort à / mort en"@fr ;
            sh:nodeKind sh:IRI ;
            sh:order "2" ;
            sh:path ( dbpedia:deathPlace dbpedia:country ) ],
        [ core:enableNegation true ;
            core:enableOptional true ;
            datasources:datasource datasources:list_rdfslabel_alpha_with_count ;
            dash:searchWidget core:ListProperty ;
            sh:class dbpedia:Country ;
            sh:description "Persons who were born in this country.<br/><br/><em>Note : in DBPedia, persons are linked to the city in which they were born, and the city is linked to the country.</em>"@en,
                "Les personnes nées dans ce pays.<br/><br/><em>A noter : dans DBPedia, les personnes sont liées à leur ville de naissance, et la ville est reliée au pays.</em>"@fr ;
            sh:maxCount 1 ;
            sh:name "born in"@en,
                "né à / né en"@fr ;
            sh:nodeKind sh:IRI ;
            sh:order "1" ;
            sh:path ( dbpedia:birthPlace dbpedia:country ) ],
        [ core:enableNegation true ;
            core:enableOptional true ;
            dash:searchWidget core:TimeProperty-Year ;
            sh:datatype xsd:gYear ;
            sh:name "death year"@en,
                "année de décès"@fr ;
            sh:node this:Date ;
            sh:nodeKind sh:Literal ;
            sh:order "2" ;
            sh:path dbpedia:deathYear ],
        [ core:enableNegation true ;
            core:enableOptional true ;
            datasources:treeChildrenDatasource datasources:tree_children_skosnarrower ;
            datasources:treeRootsDatasource this:tree_root_frenchPainters ;
            dash:searchWidget core:TreeProperty ;
            sh:name "category"@en,
                "catégorie"@fr ;
            sh:node this:Category ;
            sh:nodeKind sh:IRI ;
            sh:path dcterms:subject ] ;
    sh:targetClass dbpedia:Person .

this:query_search_label_contains_langfr a datasources:SPARQLQuery ;
    datasources:queryString """SELECT DISTINCT ?uri ?label\r
WHERE {\r
 ?domain a $domain .\r
 ?domain $property ?uri .\r
 ?uri a $range .\r
 ?uri $labelPath ?label .\r
 FILTER(isIRI(?uri))\r
 FILTER(CONTAINS(LCASE(STR(?label)), LCASE("$key"))) \r
 FILTER(lang(?label) = '' || lang(?label) = "fr")\r
} \r
ORDER BY UCASE(?label)\r
LIMIT 50""" ;
    rdfs:comment "A query that will search in labels using contains function, first in the user language but will default to French."@en .

this:Category a sh:NodeShape ;
    rdfs:label "Category"@en,
        "Catégorie"@fr ;
    volipi:iconName "fa-solid fa-palette" ;
    sh:description "A wikipedia category"@en,
        "Une catégorie Wikipedia"@fr ;
    sh:nodeKind sh:IRI ;
    sh:order 6 .

this:Movement a sh:NodeShape ;
    rdfs:label "Movement"@en,
        "Mouvement"@fr ;
    volipi:iconName "fa-solid fa-palette" ;
    sh:description "A school of artists, a painting style"@en,
        "Une école d'artistes, un style pictural"@fr ;
    sh:nodeKind sh:IRI ;
    sh:order 5 ;
    sh:property [ core:enableNegation false ;
            core:enableOptional false ;
            dash:propertyRole dash:LabelRole ;
            dash:searchWidget core:AutocompleteProperty ;
            sh:datatype rdf:langString ;
            sh:minCount 1 ;
            sh:name "label"@en,
                "libellé"@fr ;
            sh:node this:Text ;
            sh:nodeKind sh:Literal ;
            sh:path rdfs:label ],
        [ core:enableNegation true ;
            core:enableOptional true ;
            datasources:datasource datasources:search_rdfslabel_bifcontains ;
            dash:searchWidget core:AutocompleteProperty ;
            sh:class dbpedia:Person ;
            sh:name "participant"@en,
                "participant"@fr ;
            sh:nodeKind sh:IRI ;
            sh:path [ sh:inversePath dbpedia:movement ] ],
        [ core:enableNegation true ;
            core:enableOptional true ;
            dash:searchWidget core:SearchProperty ;
            sh:datatype rdf:langString ;
            sh:minCount 1 ;
            sh:name "description"@en,
                "description"@fr ;
            sh:node this:Text ;
            sh:nodeKind sh:Literal ;
            sh:path rdfs:comment ] .

this:MuseumWikidata a sh:NodeShape ;
    rdfs:label "Wikidata Museum"@en,
        "Musée Wikidata"@fr ;
    volipi:iconName "fa-solid fa-university" ;
    sh:description "The record of the Museum in Wikidata."@en,
        "La fiche du musée dans Wikidata"@fr ;
    sh:nodeKind sh:IRI ;
    sh:order 7 ;
    sh:property [ core:enableNegation true ;
            core:enableOptional true ;
            core:sparqlService <https://www.wikidata.org> ;
            dash:searchWidget core:MapProperty ;
            sh:name "located at"@en,
                "situé à"@fr ;
            sh:node this:Position ;
            sh:nodeKind sh:IRI ;
            sh:path wdt:P625 ] .

this:Number a sh:NodeShape ;
    rdfs:label "Number"@en,
        "Nombre"@fr ;
    volipi:iconName "fa-solid fa-1" ;
    sh:nodeKind sh:Literal ;
    sh:order 14 .

this:Position a sh:NodeShape ;
    rdfs:label "Position"@en,
        "Position"@fr ;
    volipi:iconName "fa-solid fa-map" ;
    sh:description "Position on a map, expressed as WKT datatype, queried in GeoSPARQL"@en,
        "Position sur une carte, exprimée en WKT, requếtée avec GeoSPARQL"@fr ;
    sh:nodeKind sh:Literal ;
    sh:order 12 .

this:tree_root_frenchPainters a datasources:SparqlTreeRootDatasource ;
    datasources:queryString """PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\r
SELECT ?uri ?label ?hasChildren\r
WHERE {\r
 VALUES ?uri {<http://fr.dbpedia.org/resource/Catégorie:Peintre_français>}\r
 ?uri skos:prefLabel ?label .\r
 FILTER(lang(?label) = '' || lang(?label) = $lang)\r
 BIND(true AS ?hasChildren)\r
}""" .

<https://www.wikidata.org> a sparql:Service ;
    sparql:endpoint <https://query.wikidata.org/> .

this:Date a sh:NodeShape ;
    rdfs:label "Date"@en,
        "Date"@fr ;
    volipi:iconName "fa-solid fa-calendar-alt" ;
    sh:description "A date or a year"@en,
        "Une date ou une année"@fr ;
    sh:nodeKind sh:Literal ;
    sh:order 11 .

this:Image a sh:NodeShape ;
    rdfs:label "Image"@en,
        "Image"@fr ;
    volipi:iconName "fa-solid fa-image" ;
    sh:nodeKind sh:Literal ;
    sh:order 10 .

this:Text a sh:NodeShape ;
    rdfs:label "Text"@en,
        "Texte"@fr ;
    volipi:iconName "fa-solid fa-a" ;
    sh:description "An attribute, a property that describes the object, like a name or a description. <br/><br/>Use this to select the name of the object."@en,
        "Un attribut qui caractérise l'objet, comme un nom ou une description. <br/><br/>Choisissez ceci pour sélectionner le nom de l'objet"@fr ;
    sh:nodeKind sh:Literal ;
    sh:order 13 .

